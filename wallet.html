<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet - Mini App</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        .wallet-balance-card{background:linear-gradient(45deg,#6a5acd,#9370db);color:white;padding:25px;border-radius:15px;text-align:center;margin-bottom:20px;box-shadow:0 8px 15px rgba(106,90,205,0.4);}
        .wallet-balance-card h3{font-size:16px;margin-bottom:5px;font-weight:normal;}
        .wallet-balance-card p{font-size:32px;font-weight:bold;}
        .select-group{margin-bottom:15px;}
        .select-group select{width:100%;padding:10px;border-radius:10px;border:1px solid #ddd;background:#f7f7f7;font-size:16px;}
        .hidden{display:none;}
        .history-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #eee;}
        .history-item:last-child{border-bottom:none;}
        .status-tag{padding:4px 8px;border-radius:8px;font-size:12px;font-weight:bold;}
        .status-pending{background:#fff3cd;color:#856404;}
        .status-paid{background:#d4edda;color:#155724;}
        .status-rejected{background:#f8d7da;color:#721c24;}
        .address-box{display:flex;align-items:center;position:relative;}
        .address-box input{padding-right:60px !important;}
        .btn-paste{position:absolute;right:0;top:50%;transform:translateY(-50%);padding:5px 10px;background:#6a5acd;color:white;border-radius:0 10px 10px 0;border:none;cursor:pointer;height:100%;display:flex;align-items:center;}
        
        .popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:9999;display:none;justify-content:center;align-items:center;}
        .popup{background:white;padding:30px;border-radius:20px;text-align:center;max-width:90%;border:5px solid #27ae60;}
        .popup i{font-size:60px;color:#27ae60;}
    </style>
</head>
<body>
    <div class="container">
        <div class="wallet-balance-card">
            <h3>Your Current Balance</h3>
            <p id="current-balance">৳0</p>
        </div>

        <div class="card">
            <div class="title">Withdraw Request</div>
            
            <div class="select-group">
                <label for="payment-method" class="title" style="font-size: 14px;">Select Method:</label>
                <select id="payment-method" onchange="togglePaymentFields()">
                    <option value="">-- Choose Payment Method --</option>
                    <option value="bank">Bank (Bkash/Nagad/Rocket)</option>
                    <option value="crypto">Cryptocurrency</option>
                </select>
            </div>

            <div id="bank-fields" class="hidden">
                <div class="select-group">
                    <label for="bank-type" class="title" style="font-size: 14px;">Select Bank Type:</label>
                    <select id="bank-type">
                        <option value="bKash">bKash</option>
                        <option value="Nagad">Nagad</option>
                        <option value="Rocket">Rocket</option>
                    </select>
                </div>
                <label for="phone-number" class="title" style="font-size: 14px;">Phone Number:</label>
                <div class="input-field">
                    <span style="font-weight: bold; margin-right: 5px; color: #666;">+880</span>
                    <input type="number" id="phone-number" placeholder="Enter 10 digits (e.g. 1xxxxxxxxx)" oninput="validateNumber(this)" maxlength="10">
                </div>
            </div>

            <div id="crypto-fields" class="hidden">
                <div class="select-group">
                    <label for="crypto-network" class="title" style="font-size: 14px;">Select Network:</label>
                    <select id="crypto-network">
                        <option value="TRC20">USDT (TRC20)</option>
                        <option value="ERC20">USDT (ERC20)</option>
                        <option value="BEP20">USDT (BEP20)</option>
                    </select>
                </div>
                <label for="wallet-address" class="title" style="font-size: 14px;">Wallet Address:</label>
                <div class="input-field address-box">
                    <input type="text" id="wallet-address" placeholder="Paste your wallet address here">
                    <button class="btn-paste" onclick="pasteAddress()"><i class="fas fa-paste"></i></button>
                </div>
            </div>

            <label for="withdraw-amount" class="title" style="font-size: 14px;">Withdraw Amount ($):</label>
            <div class="input-field">
                <input type="number" id="withdraw-amount" placeholder="Minimum: $10.00">
            </div>

            <button class="btn btn-primary" style="width:100%;margin-top:10px;" onclick="submitWithdrawRequest()">
                Request Withdrawal
            </button>
        </div>
        
        <div class="card" style="margin-top:20px;">
            <div class="title">Withdrawal History</div>
            <div id="history-list"></div>
        </div>
    </div>

    <!-- পপআপ -->
    <div class="popup-overlay" id="popup">
        <div class="popup">
            <i class="fas fa-check-circle"></i><br><br>
            <h3>সফল!</h3>
            <p id="popup-text">রিকোয়েস্ট জমা হয়েছে!</p>
        </div>
    </div>

    <div class="nav-bar">
        <a href="index.html" class="nav-item"><i class="fas fa-home"></i><span>Home</span></a>
        <a href="news.html" class="nav-item"><i class="fas fa-newspaper"></i><span>News</span></a>
        <a href="wallet.html" class="nav-item active"><i class="fas fa-wallet"></i><span>Wallet</span></a>
        <a href="profile.html" class="nav-item"><i class="fas fa-user-circle"></i><span>Profile</span></a>
    </div>

    <script src="wallet.js"></script>
</body>
</html>