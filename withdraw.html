<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet - Headline</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script> 
    <style>
        /* ‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ - style.css ‡¶è‡¶∞ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá */
        /* ‡¶Æ‡ßÇ‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã style.css ‡¶è ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§ ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶á‡¶â‡¶®‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ */
        
        .wallet-balance-card {
            /* style.css ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶•‡¶ø‡¶Æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
            background: linear-gradient(145deg, #6c5ce7, #5849c2); /* primary color gradient */
            color: white;
            padding: 25px;
            border-radius: var(--radius-card);
            text-align: center;
            margin-bottom: 20px;
            box-shadow: var(--shadow-outer);
        }

        .wallet-balance-card h3 {
            font-size: 16px;
            margin-bottom: 5px;
            font-weight: normal;
        }

        .wallet-balance-card p {
            font-size: 32px;
            font-weight: bold;
        }
        
        /* ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .wallet-points-card {
            background: var(--bg-card); /* ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
            color: var(--text-main);
            padding: 20px;
            border-radius: var(--radius-card);
            text-align: center;
            margin-bottom: 20px;
            box-shadow: var(--shadow-outer);
            border: 1px solid rgba(255, 255, 255, 0.03);
        }

        .wallet-points-card h4 {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 5px;
        }
        
        .wallet-points-card p {
            font-size: 24px;
            font-weight: bold;
            color: var(--success); /* ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶§‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ */
        }

        .select-group {
            margin-bottom: 15px;
        }
        
        /* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü/‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ style.css ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
        .select-group select {
            width: 100%;
            background: var(--bg-body);
            border: none;
            padding: 14px;
            border-radius: var(--radius-btn);
            color: var(--text-main);
            font-size: 15px;
            box-shadow: var(--shadow-inner);
            outline: none;
        }
        
        .select-group label {
            display: block;
            color: var(--text-muted);
            margin-bottom: 5px;
            font-weight: 600;
        }

        .hidden {
            display: none;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05); /* ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶•‡¶ø‡¶Æ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ */
            color: var(--text-main);
        }

        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-item p {
            margin: 0;
        }

        .status-tag {
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
            color: #000; /* ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶æ‡¶≤‡ßã */
        }

        /* ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶•‡¶ø‡¶Æ‡ßá ‡¶∏‡¶æ‡¶Æ‡¶û‡ßç‡¶ú‡¶∏‡ßç‡¶Ø‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá */
        .status-pending { background-color: #fdd835; } /* amber */
        .status-paid { background-color: #00b894; } /* success */
        .status-rejected { background-color: #ff7675; } /* danger */
        
        .address-box {
            display: flex;
            align-items: center;
            position: relative;
        }

        .address-box input {
            padding-right: 60px !important; 
        }

        .btn-paste {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            padding: 5px 10px;
            background-color: var(--primary); /* primary color */
            color: white;
            border-radius: 0 var(--radius-btn) var(--radius-btn) 0;
            border: none;
            cursor: pointer;
            height: 100%;
            display: flex;
            align-items: center;
            font-size: 16px;
        }
        
        /* ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ */
        .nav-bar {
            display: none; /* ‡¶¨‡¶ü‡¶Æ-‡¶®‡ßá‡¶≠ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶á‡¶ü‡¶æ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã */
        }
        
    </style>
</head>
<body>
    <div class="container">
        
        <div class="card profile-header" style="background: none; box-shadow: none; margin-bottom: 0; padding-bottom: 0;">
             <h3 class="title" style="margin-bottom: 5px;">Wallet</h3>
             <p style="color: var(--text-muted); font-size: 14px; text-align: center;">Manage your funds and withdrawals.</p>
        </div>
        
        <div class="wallet-balance-card">
            <h3>Your Current Balance</h3>
            <p id="current-balance">Loading...</p>
        </div>
        
        <div class="wallet-points-card">
            <h4>Total Points Available</h4>
            <p id="total-points-display">Loading...</p>
        </div>

        <div class="card">
            <div class="title">Withdraw Request</div>
            
            <div class="select-group">
                <label for="payment-method">Select Method:</label>
                <select id="payment-method" onchange="togglePaymentFields()">
                    <option value="">-- Choose Payment Method --</option>
                    <option value="bank">Bank (Bkash/Nagad/Rocket)</option>
                    <option value="crypto">Cryptocurrency</option>
                </select>
            </div>

            <div id="bank-fields" class="hidden">
                <div class="select-group">
                    <label for="bank-type">Select Bank Type:</label>
                    <select id="bank-type">
                        <option value="bKash">bKash</option>
                        <option value="Nagad">Nagad</option>
                        <option value="Rocket">Rocket</option>
                    </select>
                </div>
                
                <label for="phone-number">Phone Number:</label>
                <div class="input-field">
                    <span style="font-weight: bold; margin-right: 5px; color: var(--text-muted);">+880</span>
                    <input type="number" id="phone-number" placeholder="Enter 10 digits (e.g. 1xxxxxxxxx)" oninput="validateNumber(this)" maxlength="10">
                </div>
            </div>

            <div id="crypto-fields" class="hidden">
                <div class="select-group">
                    <label for="crypto-network">Select Network:</label>
                    <select id="crypto-network">
                        <option value="TRC20">USDT (TRC20)</option>
                        <option value="ERC20">USDT (ERC20)</option>
                        <option value="BEP20">USDT (BEP20)</option>
                    </select>
                </div>
                
                <label for="wallet-address">Wallet Address:</label>
                <div class="input-field address-box">
                    <input type="text" id="wallet-address" placeholder="Paste your wallet address here">
                    <button class="btn-paste" onclick="pasteAddress()"><i class="fas fa-paste"></i></button>
                </div>
            </div>

            <label for="withdraw-amount">Withdraw Amount:</label>
            <div class="input-field">
                <span id="withdraw-currency-symbol" style="font-weight: bold; margin-right: 5px; color: var(--primary);">‡ß≥</span>
                <input type="number" id="withdraw-amount" placeholder="Minimum: 10.00" style="padding-left: 5px;">
            </div>

            <button class="btn btn-primary" style="width: 100%; margin-top: 10px;" onclick="submitWithdrawRequest()">
                Request Withdrawal
            </button>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <div class="title">Withdrawal History</div>
            <div id="history-list">
                <div class="history-item">
                    <div>
                        <small style="color: var(--text-muted);">Trx ID: **TXN-123456**</small>
                        <p style="font-size: 15px;">Bank (**bKash**): **+88017xxxxxx**</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-weight: bold; color: var(--primary);">‡ß≥25.00</p>
                        <span class="status-tag status-paid">Paid</span>
                    </div>
                </div>
                 <div class="history-item">
                    <div>
                        <small style="color: var(--text-muted);">Trx ID: **TXN-789012**</small>
                        <p style="font-size: 15px;">Crypto (**TRC20**): **Txxxxxxxx...**</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-weight: bold; color: var(--primary);">‡ß≥100.00</p>
                        <span class="status-tag status-pending">Pending</span>
                    </div>
                </div>
                <div class="history-item">
                    <div>
                        <small style="color: var(--text-muted);">Trx ID: **TXN-345678**</small>
                        <p style="font-size: 15px;">Bank (**Nagad**): **+88019xxxxxx**</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-weight: bold; color: var(--primary);">‡ß≥50.00</p>
                        <span class="status-tag status-rejected">Rejected</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <button class="nav-item" onclick="goToHome()">Home</button>
        <button class="nav-item" onclick="goToSupport()">Support</button>
        <button class="nav-item" onclick="goToNews()">News</button>
        <button class="nav-item active" onclick="goToWithdraw()">Withdraw</button>
        <button class="nav-item" onclick="goToProfile()">Profile</button>
    </nav>


    <script>
    
    // üî• ‡ßß. ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® (profile.html ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ)
    const firebaseConfig = {
        apiKey: "AIzaSyBQf-ILFW6jDV-c_O2LG6elA5oAB84p2XQ",
        authDomain: "top-news-91db8.firebaseapp.com",
        databaseURL: "https://top-news-91db8-default-rtdb.firebaseio.com",
        projectId: "top-news-91db8",
        storageBucket: "top-news-91db8.firebasestorage.app",
        messagingSenderId: "348369077928",
        appId: "1:348369077928:web:7629c503c30cbf7450649d",
        measurementId: "G-7GMX8N2NSC"
    };

    // ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡¶≤‡¶æ‡¶á‡¶ú
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();

    // üî• ‡ß®. ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ì‡ßü‡ßá‡¶¨ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ (profile.html ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ)
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏
    const user = tg.initDataUnsafe.user;
    const userId = user?.id.toString() || 'unknown'; // ‡¶ü‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç‡ßü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø unknown
    const userRef = db.collection('users').doc(userId);
    
    // üî• ‡ß©. ‡¶ï‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶∞‡ßá‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü (profile.html ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ)
    const CURRENCY_RATES = {
        'BDT': { symbol: '‡ß≥', rate: 1.0, name: 'Bangladeshi Taka' },       
        'USD': { symbol: '$', rate: 0.0091, name: 'US Dollar' },    
        'INR': { symbol: '‚Çπ', rate: 0.75, name: 'Indian Rupee' },      
        'PKR': { symbol: 'Rs', rate: 2.50, name: 'Pakistani Rupee' }      
    };
    
    // ‡ßß‡ß¶‡ß¶‡ß¶ ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü = ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ (BDT) 
    const POINT_TO_BDT_RATE = 10 / 1000; 

    // üî• ‡ß™. ‡¶∞‡¶ø‡ßü‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
    function loadWalletData() {
        userRef.onSnapshot((doc) => {
            let balanceBDT = 0;
            let points = 0;
            let currencyCode = 'BDT'; // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü

            if (doc.exists) {
                const data = doc.data();
                currencyCode = data.currency || 'BDT';
                balanceBDT = data.balance || 0; // ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶∏‡¶¨ ‡¶∏‡¶Æ‡ßü BDT ‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
                points = data.points || 0;
            } 
            
            // ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            updateWalletDisplay(balanceBDT, points, currencyCode);
            
            // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            const rateData = CURRENCY_RATES[currencyCode] || CURRENCY_RATES['BDT'];
            document.getElementById("withdraw-currency-symbol").innerText = rateData.symbol;
            document.getElementById("withdraw-amount").placeholder = `Minimum: ${rateData.symbol}10.00`;
        });
    }

    // üî• ‡ß´. ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function updateWalletDisplay(balanceBDT, points, currencyCode) {
        const rateData = CURRENCY_RATES[currencyCode] || CURRENCY_RATES['BDT'];
        
        // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡¶®‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®
        const convertedBalance = (balanceBDT * rateData.rate).toFixed(2);
        
        // ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ (‡¶ü‡¶æ‡¶ï‡¶æ‡ßü)
        const pointsValueInBDT = points * POINT_TO_BDT_RATE;
        // ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ï‡¶®‡¶≠‡¶æ‡¶∞‡ßç‡¶ü‡ßá‡¶° ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ
        const pointsValueConverted = (pointsValueInBDT * rateData.rate).toFixed(2);

        // HTML ‡¶Ü‡¶™‡¶°‡ßá‡¶ü - ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏
        document.getElementById("current-balance").innerHTML = `${rateData.symbol}${convertedBalance} <span style="font-size: 16px; color: rgba(255,255,255,0.7);">(${currencyCode})</span>`;

        // HTML ‡¶Ü‡¶™‡¶°‡ßá‡¶ü - ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü
        document.getElementById("total-points-display").innerHTML = `${points} Points <span style="font-size: 14px; color: var(--text-muted);">(${rateData.symbol}${pointsValueConverted})</span>`;
    }
    
    // wallet.js ‡¶ï‡ßã‡¶°‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶Ö‡¶Ç‡¶∂
    
    // ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ
    function togglePaymentFields() {
        const method = document.getElementById('payment-method').value;
        const bankFields = document.getElementById('bank-fields');
        const cryptoFields = document.getElementById('crypto-fields');

        bankFields.classList.add('hidden');
        cryptoFields.classList.add('hidden');

        if (method === 'bank') {
            bankFields.classList.remove('hidden');
        } else if (method === 'crypto') {
            cryptoFields.classList.remove('hidden');
        }
    }

    // ‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï
    function validateNumber(input) {
        let value = input.value;
        
        // ‡ßß. ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶∂‡ßÇ‡¶®‡ßç‡¶Ø ‡¶π‡¶¨‡ßá ‡¶®‡¶æ 
        if (value.length > 0 && value[0] === '0') {
            value = value.substring(1); 
        }
        
        // ‡ß®. ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá 
        value = value.replace(/\D/g, ''); 
        
        // ‡ß©. ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ßß‡ß¶‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ
        if (value.length > 10) {
            value = value.substring(0, 10);
        }
        
        input.value = value;
    }

    // ‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡ßã ‡¶è‡¶°‡ßç‡¶∞‡ßá‡¶∏ ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function pasteAddress() {
        if (navigator.clipboard && navigator.clipboard.readText) {
            navigator.clipboard.readText().then(text => {
                document.getElementById('wallet-address').value = text;
                tg.showAlert("Address pasted successfully!");
            }).catch(err => {
                console.error('Failed to read clipboard contents: ', err);
                tg.showAlert("Error: Could not paste address. Please paste manually.");
            });
        } else {
            tg.showAlert("Your browser does not support automatic pasting. Please paste manually.");
        }
    }

    // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ
    function submitWithdrawRequest() {
        const method = document.getElementById('payment-method').value;
        const amount = parseFloat(document.getElementById('withdraw-amount').value);
        
        if (!method || amount <= 0) {
            tg.showAlert("Please select a valid method and enter a valid amount.");
            return;
        }
        
        // ‡¶°‡ßá‡¶Æ‡ßã: ‡¶∏‡¶´‡¶≤ ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶ø‡¶Ø‡¶º‡ßá ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        const transactionId = 'TXN-' + Math.random().toString(36).substring(2, 8).toUpperCase();
        tg.showAlert(`Withdrawal request submitted! Trx ID: ${transactionId}`);
        document.getElementById('payment-method').value = '';
        document.getElementById('withdraw-amount').value = '';
        togglePaymentFields();
        loadWithdrawalHistory(); // ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
    }

    // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function loadWithdrawalHistory() {
        // ‡¶°‡ßá‡¶Æ‡ßã ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶°‡ßá‡¶ü‡¶æ - ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï ‡¶π‡¶æ‡¶∞‡ßç‡¶°‡¶ï‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá, ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶°‡¶æ‡¶á‡¶®‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§ 
        // ‡¶§‡¶¨‡ßá, ‡¶è‡¶á ‡¶°‡ßá‡¶Æ‡ßã ‡¶ï‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶Æ‡¶û‡ßç‡¶ú‡¶∏‡ßç‡¶Ø ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶°‡ßá‡¶Æ‡ßã ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã‡•§
        const historyData = [
            { id: 'TXN-001', amount: 25.00, method: 'Bank (bKash)', status: 'Paid', detail: '+88017xxxxxx' },
            { id: 'TXN-002', amount: 100.00, method: 'Crypto (TRC20)', status: 'Pending', detail: 'Txxxxxxxx...' },
            { id: 'TXN-003', amount: 50.00, method: 'Bank (Nagad)', status: 'Rejected', detail: '+88019xxxxxx' },
        ];
        
        const listContainer = document.getElementById('history-list');
        listContainer.innerHTML = '';
        
        // ‡¶°‡ßá‡¶Æ‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá, ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ü‡¶ø ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá‡•§
        // document.getElementById('current-balance').innerText = '$1,250.00'; 
    }

    // üî• ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® (profile.html ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ)
    function goToHome() { setTimeout(() => window.location.href = 'index.html', 0); }
    function goToSupport() { setTimeout(() => window.location.href = 'support.html', 0); }
    function goToNews() { setTimeout(() => window.location.href = 'news.html', 0); } 
    function goToWithdraw() { setTimeout(() => window.location.href = 'withdraw.html', 0); }
    function goToProfile() { setTimeout(() => window.location.href = 'profile.html', 0); }
    // üî• ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶∂‡ßá‡¶∑

    const bottomNav = document.querySelector('.bottom-nav');
const inputFields = document.querySelectorAll('input, textarea'); // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü‡¶ó‡ßÅ‡¶≤‡ßã

inputFields.forEach(input => {
  input.addEventListener('focus', () => {
    // ‡¶ï‡ßÄ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶ñ‡ßÅ‡¶≤‡¶õ‡ßá, ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ ‡¶®‡¶ø‡¶ö‡ßá ‡¶®‡¶æ‡¶Æ‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶®
    bottomNav.style.display = 'none'; // ‡¶Ö‡¶•‡¶¨‡¶æ bottomNav.style.transform = 'translateY(100%)'; 
  });

  input.addEventListener('blur', () => {
    // ‡¶ï‡ßÄ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶¨‡¶®‡ßç‡¶ß ‡¶π‡¶ö‡ßç‡¶õ‡ßá, ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
    bottomNav.style.display = 'flex'; // ‡¶¨‡¶æ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã transform: 'translateY(0)';
  });
});

    
    
    // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶∏‡¶ï‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ
    document.addEventListener('DOMContentLoaded', () => {
        // üî• ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
        loadWalletData();
        
        togglePaymentFields(); // ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡ßü ‡¶∏‡¶¨ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã
        loadWithdrawalHistory(); 
    });


    
    </script>
</body>
</html>
